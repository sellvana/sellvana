modules:
    FCom_Catalog:
        version: 0.3.2
        channel: beta
        require: { module: { FCom_Core: 0.1.0, FCom_LibJsCkeditor: 0.1.0 } }
        categories: [ Catalog, Products ]
        translations: { en: en.php }
        description: "Categories and products management, admin and frontend"
        auto_use: [ bootstrap, views, layout ]
        observe:
            - [ "FCom_Core_ImportExport::import:afterModel:FCom_Catalog_Model_Category", "FCom_Catalog_Model_Category.onImportAfterModel" ]
            - [ "FCom_Core_LayoutEditor::fetchLibrary", "FCom_Catalog_Main.onLayoutEditorFetchLibrary" ]

        default_config:
            modules/FCom_Catalog/allowed_locales: [ en_US ]

        areas:
            FCom_Admin:
                routing:
                    - [ /catalog/categories, FCom_Catalog_Admin_Controller_Categories.index ]
                    - [ /catalog/categories/.action, FCom_Catalog_Admin_Controller_Categories ]

                    - [ /catalog/products, FCom_Catalog_Admin_Controller_Products.index ]
                    - [ /catalog/products/.action, FCom_Catalog_Admin_Controller_Products ]

                    - [ /catalog/products/import/.action, FCom_Catalog_Admin_Controller_ProductsImport ]

                    - [ /catalog/searchalias, FCom_Catalog_Admin_Controller_SearchAlias.index ]
                    - [ /catalog/searchalias/.action, FCom_Catalog_Admin_Controller_SearchAlias ]

                    - [ "/catalog/inventory/?.action", FCom_Catalog_Admin_Controller_Inventory ]
                observe:
                    - [ FCom_Admin_Controller_HeaderSearch::action_index, FCom_Catalog_Admin_Controller_Products.onHeaderSearch ]
                    - [ FCom_Admin_Controller::action_generate_sitemap, FCom_Catalog_Admin_Controller_Products.onGenerateSiteMap ]
                    - [ FCom_Admin_Controller::action_generate_sitemap, FCom_Catalog_Admin_Controller_Categories.onGenerateSiteMap ]
                security:
                    request_fields_whitelist:
                        /catalog/categories/tree_form:
                            POST/model/content: "*"
                        /catalog/products/form:
                            POST/model/description: "*"
                uploads:
                    product-import:
                        permission: catalog/product/import
                        filetype: csv,txt
                        folder: {random}/import/products
                    product-images:
                        permission: catalog/product/images
                        filetype: jpeg,jpg,tiff,gif,png,bmp
                        folder: media/product/images
                    product-attachments:
                        permission: catalog/product/attachements
                        filetype: jpeg,jpg,tiff,gif,png,bmp,pdf,doc,txt
                        folder: media/product/attachment
                    category-images:
                        permission: catalog/category/images
                        filetype: jpeg,jpg,tiff,gif,png,bmp
                        folder: media/category/images

            FCom_Frontend:
                routing:
                    - [ /*category, FCom_Catalog_Frontend_Controller_Search.category ]
                    - [ /catalog/search, FCom_Catalog_Frontend_Controller_Search.search ]
                    - [ /catalog/quickview, FCom_Catalog_Frontend_Controller.quickview ]
                    - [ "/:product", FCom_Catalog_Frontend_Controller.product ]
                    - [ "/*category/:product", FCom_Catalog_Frontend_Controller.product ]

                observe:
                    - [ "FCom_FrontendCP_Frontend_Controller::action_update:after", "FCom_Catalog_Frontend_ControlPanel::onAfterUpdate" ]
                    - [ "FCom_Core_View_BackboneGrid::getPageRowsData", "FCom_Catalog_Admin_Controller_Products::processInitalData" ]
                    - [ "FCom_Sales_Workflow::customerAddsItems:calcDetails", FCom_Catalog_Frontend.onWorkflowCustomerAddsItemsCalcDetails ]
                views:
                    - [ catalog/product/pager, { view_class: FCom_Catalog_Frontend_View_Pager } ]
                    - [ catalog/product/price, { view_class: FCom_Catalog_Frontend_View_Price } ]

            FCom_ApiServer:
                routing:
                    - [ /v1/catalog/category, FCom_Catalog_ApiServer_V1_Category.index ]
                    - [ "/v1/catalog/category/:id", FCom_Catalog_ApiServer_V1_Category.index ]

                    - [ /v1/catalog/product, FCom_Catalog_ApiServer_V1_Product.index ]
                    - [ "/v1/catalog/product/:id", FCom_Catalog_ApiServer_V1_Product.index ]
