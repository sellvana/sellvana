modules:
    FCom_CustomField:
        version: 0.2.2
        channel: beta
        require: { module: { FCom_Catalog: 0.2.1 } }
        translations: { en: en.php }
        after: [ FCom_Customer ]
        description: "Base custom fields implementation, currently for catalog only"
        auto_use: [ bootstrap ]
        observe:
            - [ "FCom_Catalog_Model_Product::find_one:orm", FCom_CustomField_Main.productFindORM ]
            - [ "FCom_Catalog_Model_Product::find_many:orm", FCom_CustomField_Main.productFindORM ]
            - [ "FCom_Catalog_Model_Product::onAfterSave", FCom_CustomField_Main.productAfterSave ]

        areas:
            FCom_Admin:
                auto_use: [ views, layout ]
                routing:
                    - [ /customfields/fieldsets, FCom_CustomField_Admin_Controller_FieldSets.fieldsets ]
                    - [ /customfields/fields, FCom_CustomField_Admin_Controller_FieldSets.fields ]
                    - [ /customfields/fieldsets/.action, FCom_CustomField_Admin_Controller_FieldSets ]
                    - [ /customfields/fields/.action, FCom_CustomField_Admin_Controller_FieldSets ]
                    - [ /customfields/products/.action, FCom_CustomField_Admin_Controller_Products ]
                observe:
                    - [ "FCom_Catalog_Admin_Controller_Products::gridColumns", FCom_CustomField_Admin.onProductGridColumns ]
                    - [ "FCom_Catalog_Admin_Controller_Products::formViewBefore", FCom_CustomField_Admin.onProductsFormViewBefore ]
                    - [ "FCom_Catalog_Admin_Controller_Products::formPostAfter:afterValidate", FCom_CustomField_Admin.onProductFormPostAfterValidate ]
                security:
                    request_fields_whitelist:
                        /catalog/products/form:
                            POST/custom_fields: "*"

            FCom_Frontend:
                auto_use: [ views ]
                observe:
                    - [ "BLayout::hook:custom-fields-filters", FCom_CustomField_Main.hookCustomFieldFilters ]
                    - [ "FCom_Sales_Workflow::customerAddsItems:calcDetails", FCom_CustomField_Frontend.onWorkflowCustomerAddsItemsCalcDetails ]
