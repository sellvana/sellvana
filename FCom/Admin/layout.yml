base:
  - { root: root }
  - { hook: head, views: head }
  - { hook: header, views: admin/header }
  - { hook: top-nav, views: admin/nav }
  - { hook: before_body_end, views: bottom_scripts }

  - { callback: FCom_Core_Main::defaultThemeCustomLayout }
  - { callback: FCom_Admin_Admin::layout }

  - { include: common_js_libs }

  - view: head
    do:
      - [ meta, Content-Type, "text/html; charset=UTF-8", true ]
      - [ icon, @FCom_Core/favicon.ico ]
      #- [ js, @FCom_Core/js/lib/head.min.js ]
      - [ css, @FCom_Admin/compass/css/screen.css ]
      #- [ js, @FCom_Core/js/lib/html5shiv.min.js, { if: lt IE 9 } ]
      #- [ js, @FCom_Core/js/lib/es5-shim.min.js, { if: lt IE 9 } ]
      #- [ js, //ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js ]
      #- [ css, @FCom_Core/js/lib/css/smoothness/jquery-ui-1.8.17.custom.css ]
      - [ css, @FCom_Core/js/select2/select2.css ]
      - [ css, @FCom_Core/css/core.css ]
      - [ css, //ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.min.css ]
      #- [ css, @FCom_Core/js/lib/css/layout-default-latest.css ]
      #- [ css, @FCom_Core/js/lib/css/jquery.pnotify.default.css ]      #- [ css, @FCom_Core/bootstrap/css/bootstrap-responsive.min.css ]

      #- [ js, @FCom_Core/js/lib/json2.js ]
      #- [ js, //ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js ]
      #- [ js, @FCom_Core/js/lib/angular.min.js ]
      #- [ js, @FCom_Core/js/lib/jquery.ba-hashchange.min.js ]
      #- [ requireModulePath, FCom_Admin ]
      - [ requireJs, jquery.cookie, @FCom_Core/js/lib/jquery.cookie, { deps: [ jquery ] } ]
      - [ requireJs, jquery.hotkeys, @FCom_Core/js/lib/jquery.hotkeys, { deps: [ jquery ] } ]
      #- [ requireJs, @FCom_Core/js/lib/jquery.layout-latest.min.js ]
      #- [ js, @FCom_Core/js/lib/jquery.pnotify.min.js ]
      #- [ js, @FCom_Core/js/select2/select2.min.js ]
      # highcharts
      - [ requireJs, highcharts, @FCom_Admin/js/highcharts/highcharts, { deps: [ jquery ] } ]

      - [ requireJs, bootstrap, @FCom_Admin/compass/js/bootstrap.min, { deps: [ jquery ] } ]
      - [ requireJs, ckeditor, @FCom_Core/js/lib/ckeditor/ckeditor, { deps: [ jquery ] } ]
      - [ requireJs, ckeditor-jquery, @FCom_Core/js/lib/ckeditor/adapters/jquery, { deps: [ jquery, ckeditor ] } ]
      - [ requireJs, fcom.admin, @FCom_Admin/js/fcom.admin ]
      - [ requireJs, fcom.admin.form, @FCom_Admin/js/fcom.admin.form ]
      - [ requireRun, fcom.admin ]

  - { include: grid }
  - { include: jqgrid }
  - { include: jstree }
  - { include: lib_backgrid }

  - view: head
    do:
      #- [ css, @FCom_Admin/css/fcom.admin.css ] # need to be separate from other CSS for correct ordering in styling

  - view: admin/nav
    do:
      - [ addNav, home, { label: Dashboard, href: /, pos: 10, icon_class: icon-home-1 } ]
      - [ addNav, system, { label: System, pos: 900, icon_class: icon-cog-1 } ]
      - [ addNav, system/users, { label: Users, href: /users  } ]
      - [ addNav, system/roles, { label: Roles & Permissions, href: /roles  } ]
      - [ addNav, system/settings, { label: Settings, href: /settings, class: system-settings } ]
      - [ addNav, system/modules, { label: Installed Modules, href: /modules } ]

  - view: admin/header
    do:
      - [ addShortcut, system/users, { label: New User, href: /users/form } ]

jqgrid:
  - view: head
    do:
      - [ css, @FCom_Core/js/lib/jqGrid/ui.jqgrid.css ]
      - [ css, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect.css ]

      # - [ css, @FCom_Core/js/lib/jqGrid/css/ui.jqgrid.css ]

      # - [ css, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect.css ]

      - [ requireJs, jqgrid.ui.multiselect, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect ]
      - [ requireJs, jqgrid.i18n.en, @FCom_Core/js/lib/jqGrid/i18n/grid.locale-en, { deps: [ jquery ] } ]
      - [ requireJs, jqgrid, @FCom_Core/js/lib/jqGrid/jquery.jqGrid.min, { deps: [ jquery, jqgrid.i18n.en ], exports: $.fn.jqgrid } ]
      - [ requireJs, jqgrid.tablednd, @FCom_Core/js/lib/jqGrid/plugins/jquery.tablednd, { deps: [ jqgrid ] } ]
      - [ requireJs, jqgrid.contextmenu, @FCom_Core/js/lib/jqGrid/plugins/jquery.contextmenu, { deps: [ jqgrid ] } ]

      # - [ js, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect.js ]

      # - [ js, @FCom_Core/js/lib/jqGrid/js/i18n/grid.locale-en.js ]
      # - [ js, @FCom_Core/js/lib/jqGrid/dist/jquery.jqGrid.min.js ]

      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.base.js ] # jqGrid base
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.common.js ] # jqGrid common for editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.formedit.js ] # jqGrid Form editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.inlinedit.js ] # jqGrid inline editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.celledit.js ] # jqGrid cell editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.subgrid.js ] #jqGrid subgrid
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.treegrid.js ] #jqGrid treegrid
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.grouping.js ] #jqGrid grouping
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.custom.js ] #jqGrid custom
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.tbltogrid.js ] #jqGrid table to grid
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.import.js ] #jqGrid import
      # - [ js, @FCom_Core/js/lib/jqGrid/js/jquery.fmatter.js ] #jqGrid formater
      # - [ js, @FCom_Core/js/lib/jqGrid/js/JsonXml.js ] # xmljson utils
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.jqueryui.js ] # jQuery UI utils
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.filter.js ] # filter Plugin

jstree:
  - view: head
    do:
      - [ css, @FCom_Core/js/lib/themes/default/style.css ]
      - [ requireJs, jstree, @FCom_Core/js/lib/jquery.jstree, { deps: [ jquery, jquery.hotkeys, jquery.cookie ] } ]

mcdropdown:
  - view: head
    do:
      - [ css, @FCom_Core/js/lib/css/jquery.mcdropdown.css ]
      - [ requireJs, jquery.bgiframe, @FCom_Core/js/lib/jquery.bgiframe, { deps: [ jquery ] } ]
      - [ requireJs, mcdropdown, @FCom_Core/js/lib/jquery.mcdropdown, { deps: [ jquery, jquery.bgiframe ] } ]

codemirror:
  - view: head
    do:
      - [ css, @FCom_Admin/js/codemirror/lib/codemirror.css ]
      - [ requireJs, codemirror, @FCom_Admin/js/codemirror/lib/codemirror ]
      - [ requireJs, codemirror-loadmode, @FCom_Admin/js/codemirror/addon/mode/loadmode, { deps: [ coremirror ] } ]

flot:
  - view: head
    do:
      - [ requireJs, excanvas, @FCom_Admin/js/flot/excanvas.min ]
      - [ requireJs, jquery.colorhelpers, @FCom_Admin/js/flot/jquery.colorhelpers.min, { deps: [ jquery ] } ]
      - [ requireJs, flot, @FCom_Admin/js/flot/jquery.flot.min, { deps: [ jquery ] } ]
      - [ requireJs, flot.canvas, @FCom_Admin/js/flot/jquery.flot.canvas.min, { deps: [ flot ] } ]
      - [ requireJs, flot.categories, @FCom_Admin/js/flot/jquery.flot.categories.min, { deps: [ flot ] } ]
      - [ requireJs, flot.crosshair, @FCom_Admin/js/flot/jquery.flot.crosshair.min, { deps: [ flot ] } ]
      - [ requireJs, flot.errorbars, @FCom_Admin/js/flot/jquery.flot.errorbars.min, { deps: [ flot ] } ]
      - [ requireJs, flot.fillbetween, @FCom_Admin/js/flot/jquery.flot.fillbetween.min, { deps: [ flot ] } ]
      - [ requireJs, flot.image, @FCom_Admin/js/flot/jquery.flot.image.min, { deps: [ flot ] } ]
      - [ requireJs, flot.navigate, @FCom_Admin/js/flot/jquery.flot.navigate.min, { deps: [ flot ] } ]
      - [ requireJs, flot.pie, @FCom_Admin/js/flot/jquery.flot.pie.min, { deps: [ flot ] } ]
      - [ requireJs, flot.resize, @FCom_Admin/js/flot/jquery.flot.resize.min, { deps: [ flot ] } ]
      - [ requireJs, flot.selection, @FCom_Admin/js/flot/jquery.flot.selection.min, { deps: [ flot ] } ]
      - [ requireJs, flot.stack, @FCom_Admin/js/flot/jquery.flot.stack.min, { deps: [ flot ] } ]
      - [ requireJs, flot.symbol, @FCom_Admin/js/flot/jquery.flot.symbol.min, { deps: [ flot ] } ]
      - [ requireJs, flot.time, @FCom_Admin/js/flot/jquery.flot.time.min, { deps: [ flot ] } ]
      - [ requireJs, flot.threshold, @FCom_Admin/js/flot/jquery.flot.threshold.min, { deps: [ flot ] } ]

form:
  - view: head
    do:
      #- [ css, @FCom_Core/js/lib/themes/default/style.css ]
  - { include: jstree }

404:
  - { include: base }
  - { hook: main, views: 404 }

/:
    - { include: base }
    - { include: flot }
    - { hook: main, views: home }
    - { view: admin/nav, do: [[ setNav, home ]] }

/denied:
    - { include: base }
    - { hook: main, views: denied }


/login:
    - { include: base }
    - { include: form }
    - { hook: main, views: login }

/password/recover:
    - { include: base }
    - { include: form }
    - { hook: main, views: password/recover }

/password/reset:
    - { include: base }
    - { include: form }
    - { hook: main, views: password/reset }


/my_account:
    - { include: base }
    - { hook: main, views: my_account }

/reports:
    - { include: base }
    - { hook: main, views: reports }

/users:
    - { include: base }
    - { hook: main, views: admin/grid }
    - { view: admin/nav, do: [[ setNav, admin/users ]] }

/users/form:
    - { include: base }
    - { include: form }
    - { view: admin/nav, do: [[ setNav, admin/users ]] }
    - { hook: main, views: admin/form }
    - view: admin/form
      set: { tab_view_prefix: users-form/ }
      do:
        - [ addTab, main, { label: General Info } ]
        - [ addTab, history, { label: History } ]

/roles:
    - { include: base }
    - { hook: main, views: admin/grid }
    - { view: admin/nav, do: [[ setNav, admin/roles ]] }

/roles/form:
    - { include: base }
    - { include: form }
    - { view: admin/nav, do: [[ setNav, admin/roles ]] }
    - { hook: main, views: admin/form }
    - view: admin/form
      set: { tab_view_prefix: roles-form/ }
      do:
        - [ addTab, main, { label: Permissions } ]
        - [ addTab, users, { label: Users } ]

/settings:
    - { include: base }
    - { include: form }
    - { include: codemirror }
    - { hook: main, views: settings }
    - { view: admin/nav, do: [[ setNav, admin/settings ]] }
    - view: settings
      set: { tab_view_prefix: settings/ }
      do:
        - [ addTabGroup, other, { label: Other, pos: 900 } ]
        - [ addTabGroup, areas, { label: Areas, pos: 10 } ]
        - [ addTab, FCom_Core, { label: Fulleron Core, group: areas, async: true } ]
        - [ addTab, FCom_Admin, { label: Fulleron Admin, group: areas, async: true } ]
        - [ addTab, FCom_Frontend, { label: Fulleron Frontend, group: areas, async: true } ]

/modules:
    - { include: base }
    - { hook: main, views: modules }
    - { view: admin/nav, do: [[ setNav, admin/modules ]] }
