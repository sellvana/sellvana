- $user = FCom_Admin_Model_User::sessionUser();
- $modulesNotification = array();
- $this->hook('hook_modules_notification', array('modulesNotification' => &$modulesNotification));

.ui-layout-north
    %header.adm-topbar
        %nav.adm-nav
            %a.start(href="#")
                %span.adm-logo = $this->_('Fulleron Admin')
            - echo $this->renderNodes()
        %nav.sup-links
            %ul
                - if (!empty($this->_quickSearches))
                    %li.sup-quicksearch
                        %a(href="#")
                            %span.icon
                            %span.title = $this->_('Quicksearch')
                        %form.sub-section(action="#" method="post")
                            %fieldset
                                %ul.form-list
                                    %li
                                        %select
                                            - foreach ($this->_quickSearches as $qs)
                                                %option(value="{$qs['href']}") = $qs['label']
                                    %li
                                        %input(type="text")
                                %input.btn.st2.sz2(type="submit" value="Search")

                - if (!empty($this->_shortcuts))
                    %li.sup-shortcuts
                        %a(href="#")
                            %span.icon
                            %span.title = $this->_('Shortcuts')
                        %ul.sub-section
                            - foreach ($this->_shortcuts as $sc)
                                %li
                                    %a(href="#{$sc['href']}") = $sc['label']

                - if ($modulesNotification)
                    %li.sup-updates
                        %a(href="#{BApp::href('market/index')}")
                            %span.icon
                            %span.title
                                = $this->_('Notifications')
                                \&nbsp;
                                %em.count = count($modulesNotification)
                        %ul.sub-section(style="width:200px")
                            - foreach ($modulesNotificationa as $notifyTitle => $notifications)
                                %li
                                    %a(style="text-decoration: none; font-weight: bold; color:black") = strtoupper($notifyTitle)
                            - foreach ($notifications as $notify)
                                - if ($notify->url)
                                    %li
                                        %a(href="#{BApp::href($notify->url)}" title="#{$notify->text}") = $notify->module
                                - else
                                    %li = $notify->module

                %li.sup-account
                    %a(href="#")
                        %span.icon
                        %span.title = $user->fullname()
                    %ul.sub-section
                        %li
                            %img(src="#{BUtil::gravatar($user->email)}" style="margin:3px 13px")
                        %li
                            %a(href="#{BApp::href('my_account')}") = $this->_('My Account')
                            %a(href="#{BApp::href('reports')}") = $this->_('My Reports')
                            %a(href="#{BApp::href('logout')}") = $this->_('Log Out')

        %strong.adm-group-title
            - if ($this->title)
                = $this->title
            - else
                \&nbsp;
