modules:
    FCom_Sales:
        version: 0.3.11
        channel: beta
        require: { module: { FCom_Core: 0.1.0, FCom_Customer: 0.1.0 } }
        description: "Fundamental Sales functionality"
        auto_use: [ bootstrap ]

        default_config:
            modules:
                FCom_Sales:
                    default_payment_method: basic
                    default_shipping_method: plain
                    order_number: "0000000"
                    cart_cookie_token_ttl_days: 30

        areas:
            FCom_Admin:
                auto_use: [ views, layout ]
                routing:
                    - [ /orders, FCom_Sales_Admin_Controller_Orders.index ]
                    - [ /orders/.action, FCom_Sales_Admin_Controller_Orders ]
                    - [ /orderstatus, FCom_Sales_Admin_Controller_OrderStatus.index ]
                    - [ /orderstatus/.action, FCom_Sales_Admin_Controller_OrderStatus ]                    
                    - [ /orderstatecustom, FCom_Sales_Admin_Controller_OrderStateCustom.index ]
                    - [ /orderstatecustom/.action, FCom_Sales_Admin_Controller_OrderStateCustom ]
                observe:
                    - [ "FCom_Admin_View_Header::getNotifications", FCom_Sales_Main.checkDefaultShippingPayment ]
                    - [ "FCom_Admin_View_Dashboard::getWidgets", FCom_Sales_Main.onGetDashboardWidgets ]
                    - [ "FCom_Admin_Controller_Settings::action_index__POST", FCom_Sales_Admin_Controller_Orders.onSaveAdminSettings ]
                    - [ "FCom_Admin_Controller_HeaderSearch::action_index", FCom_Sales_Admin_Controller_Orders.onHeaderSearch  ]

            FCom_ApiServer:
                routing:
                    - [ /v1/sales/order, FCom_Sales_ApiServer_V1_Order.index ]
                    - [ "/v1/sales/order/:id", FCom_Sales_ApiServer_V1_Order.index ]

            FCom_Frontend:
                auto_use: [ layout, views ]
                routing:
                    - [ "/cart/?.action", FCom_Sales_Frontend_Controller_Cart ]
                    - [ /orders/?.action, FCom_Sales_Frontend_Controller_Orders ]
                    - [ /guest/?.action, FCom_Sales_Frontend_Controller_Guest ]

                observe:
                    - [ "FCom_Customer_Model_Customer::login:after", "FCom_Sales_Main::onCustomerLogIn" ]
                    - [ "FCom_Customer_Model_Customer::logout:before", "FCom_Sales_Main::onCustomerLogOut" ]
                    - [ "FCom_Core_Model_Seq::getFirstSeqId", FCom_Sales_Model_Order.onGetFirstSeqId ]
            FCom_Cron:
                crontab:
                    - [ "* * * * *", FCom_Sales_Cron::everyMinute ]
