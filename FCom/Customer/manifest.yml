modules:
    FCom_Customer:
        version: 0.1.12
        channel: beta
        require: { module: { FCom_Core: 0.1.0, FCom_PushServer: 0.1.0 } }
        translations: { en: en.php }
        description: Customer Accounts and Management
        areas:
            FCom_Admin:
                auto_use: [ bootstrap, layout, views ]
                routing:
                    - [ /customers, FCom_Customer_Admin_Controller_Customers.index ]
                    - [ /customers/.action, FCom_Customer_Admin_Controller_Customers ]
                    - [ /customers/import/.action, FCom_Customer_Admin_Controller_CustomersImport ]
                    - [ /addresses/.action, FCom_Customer_Admin_Controller_Addresses ]
                observe:
                    - [ "BActionController::beforeDispatch", FCom_Customer_Admin.onControllerBeforeDispatch ]
                    - [ "FCom_Admin_View_Dashboard::getWidgets", FCom_Customer_Admin.onGetDashboardWidgets ]
                    - [ "FCom_Admin_Controller_HeaderSearch::action_index", FCom_Customer_Admin_Controller_Customers.onHeaderSearch ]
                uploads:
                    customer-import:
                        permission: customer/import
                        filetype: csv,txt
                        folder: {random}/import/customers

            FCom_Frontend:
                auto_use: [ layout, views ]
                routing:
                    - [ /login, FCom_Customer_Frontend_Controller.login ]
                    - [ /customer/register, FCom_Customer_Frontend_Controller.register ]
                    - [ /customer/password/recover, FCom_Customer_Frontend_Controller.password_recover ]
                    - [ /customer/password/reset, FCom_Customer_Frontend_Controller.password_reset ]
                    - [ /logout, FCom_Customer_Frontend_Controller.logout ]

                    - [ /customer/myaccount, FCom_Customer_Frontend_Controller_Account.index ]
                    - [ /customer/myaccount/.action, FCom_Customer_Frontend_Controller_Account ]

                    - [ /customer/address, FCom_Customer_Frontend_Controller_Address.index ]
                    - [ /customer/address/.action, FCom_Customer_Frontend_Controller_Address ]
                    #- [ /customer/address/billing, FCom_Customer_Frontend_Controller_Address.billing ]
                observe:
                    - [ "FCom_Sales_Model_Cart::addProduct", "FCom_Customer_Model_Customer::onAddProductToCart" ]
                views:
                    - [ customer/account/sidebar, { view_class: FCom_Customer_Frontend_View_Sidebar } ]

            FCom_ApiServer:
                routing:
                    - [ /v1/customer/customer, FCom_Customer_ApiServer_V1_Customer.index ]
                    - [ "/v1/customer/customer/:id", FCom_Customer_ApiServer_V1_Customer.index ]

                    - [ /v1/customer/address, FCom_Customer_ApiServer_V1_Address.index ]
                    - [ "/v1/customer/address/:id", FCom_Customer_ApiServer_V1_Address.index ]
